<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.egowaeyo.admin.mapper.AdminUserMapper">
	<!-- select 부서정보 -->
	<select id="getDept" resultType="DeptVO">
		SELECT departments_id, departments_name
		FROM departments
	</select>
	
	<!-- select 직급정보 -->
	<select id="getPos" resultType="PosVO">
		SELECT position_id, position_name
		FROM position
	</select>
	
	<!-- insert Admin ->> 사용자 정보 -->
	<insert id="AdminUserIns">
		INSERT INTO comtnemplyrinfo
		            (EMPLYR_ID, 
		             PASSWORD,
		             USER_NM,
		             EMP_PHOTO,
		             SIGN_PHOTO,
		             BRTHDY,
		             HOUSE_ADRES,
		             PHONE_NUMBER,
		             EMAIL,
		             SEXDSTN_CODE,
		             DEPARTMENTS_ID,
		             POSITION_ID,
		             EMPLYR_STTUS_CODE)
		       
		       VALUES(
		       		 #{emplyrId},
		       		 #{password},
		       		 #{userNm},
		       		 #{empPhoto},
		       		 #{signPhoto},
		       		 #{brthdy},
		       		 #{houseAdres},
		       		 #{phoneNumber},
		       		 #{email},
		       		 #{sexdstnCode},
		       		 #{departmentsId},
		       		 #{positionId},
		       		 'P'		 
		       )
	</insert>
	<insert id="insertUserMaster">
    <!-- COMVNUSERMASTER 테이블에 로그인용 사용자 정보 저장 -->
    INSERT INTO COMVNUSERMASTER
    (USER_ID,
    USER_SE,
    PASSWORD,
    USER_NM,
    USER_ZIP,
    USER_ADRES,
    USER_EMAIL,
    ORGNZT_ID,
    ESNTL_ID)
    VALUES(
    #{emplyrId},           <!-- USER_ID는 그대로 사용 -->
    'USR',                 <!-- 사용자 구분코드 -->
    #{password},           <!-- 암호화된 비밀번호 -->
    #{userNm},             <!-- 사용자명 -->
    #{zip},                <!-- 우편번호 (AdminUserVO에 zip 필드 추가 필요) -->
    #{houseAdres},         <!-- 주소 -->
    #{email},              <!-- 이메일 -->
    #{departmentsId},      <!-- 조직ID (부서ID) -->
    CONCAT('USR', #{emplyrId})  <!-- ESNTL_ID는 USR + 사용자ID 형태 -->
    )
</insert>
</mapper>
