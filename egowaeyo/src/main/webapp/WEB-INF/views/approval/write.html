<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<section layout:fragment="content">
	<div style="display: flex; gap: 2rem; align-items: flex-start;">

		<form th:action="@{/approval/write}" method="post" id="approvalForm"
			style="flex: 1;">
	<h4>문서기안 > 결재문서</h4>
		<!-- 버튼구역 만들었습니-다.  -->
			<div
				style="display: flex; justify-content: flex-end; gap: 0.5rem; margin-bottom: 1rem;">
				<button type="button" onclick="openTemplateModal()">양식선택</button>
				<button type="reset" onclick="resetAll()">초기화</button>
				<button type="button" onclick="attachedFile()">결재문서첨부</button>
				<button type="button" onclick="temporarySave()">임시저장</button>
				<button type="submit" onclick="setEditorContent()">결재</button>
			</div>
		<!-- 드롭다운 영역 정리하였습니다. div에 스타일을 줘서 중앙정렬하였습니다람쥐.  -->
			<div
				style="display: flex; justify-content: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 1rem;">
				<label for="docType">결재종류:</label> <select id="docType"
					name="docType">
					<option>업무보고</option>
					<option>지출결의서</option>
				</select> <label for="docCategory">양식:</label> <select id="docCategory"
					name="docCategory">
					<option>휴가원</option>
					<option>휴가취소원</option>
					<option>경계작전명령서</option>
					<option>세금계산서</option>
					<option>품의서</option>
				</select> <label for="docDepartment">기안부서:</label> <select id="docDepartment"
					name="docDepartment">
					<option>인사과</option>
					<option>안보과</option>
					<option>정훈과</option>
					<option>총무과</option>
				</select> <label for="docPeriod">보존연한:</label> <select id="docPeriod"
					name="docPeriod">
					<option>1년</option>
					<option>3년</option>
					<option>5년</option>
				</select> <label for="docStatus">공개여부:</label> <select id="docStatus"
					name="docStatus">
					<option>공개</option>
					<option>비공개</option>
				</select> <label for="docSecurity">보안등급:</label> <select id="docSecurity"
					name="docSecurity">
					<option>일반</option>
					<option>대외비</option>
				</select>
			</div>
	<!-- web editor 구역입니다. -->
			<div style="margin-bottom: 1rem;">
				<label for="docTitle" style="margin-right: 0.5rem;">제목:</label> <input
					type="text" name="docTitle" required style="width: 100%;" /><br />
			</div>

			<div id="editor"></div>
			<textarea name="docContent" id="docContent" style="display: none;"></textarea>
		</form>
	<!-- 화면 구성단에 있는 결재선을 구현하였습니다. -->
		<aside
			style="width: 300px; border-left: 1px solid #ccc; padding-left: 1rem;">
			<div
				style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
				<h4 style="margin: 0;">결재선</h4>
				<button type="button" onclick="openApprovalLineModal()">결재선
					지정</button>
			</div>
			<div class="approval-box">
				<strong>기안자</strong>
				<p>선택된 사용자 없음</p>
			</div>
			<div class="approval-box">
				<strong>결재자</strong>
				<p>선택된 사용자 없음</p>
			</div>
			<div class="approval-box">
				<strong>참조자</strong>
				<p>선택된 사용자 없음</p>
			</div>
		</aside>
	</div>
</section>
<th:block layout:fragment="customJs">
	<script>
	   //toast editor를 부르기위한 함수입니다. 로드 확인을 위해 if문을 걸어 제약도 걸엇읍니다.
		document.addEventListener("DOMContentLoaded", function() {
			if (typeof toastui === 'undefined') {
				console.error('ToastUI Editor가 로딩되지 않았습니다.');
				return;
			}
			const editor = new toastui.Editor({
				el : document.querySelector('#editor'),
				height : '500px',
				initialEditType : 'wysiwyg',
				previewStyle : 'vertical',
				initialValue : '',
			});

			window.setEditorContent = function() {
				document.querySelector("#docContent").value = editor.getHTML();
			};
		});
		
		document.addEventListener("click", ()=>{
			//openTemplateModal(양식모달)
		});
		
		document.addEventListener("click", ()=>{
			//resetAll(초기화)
		});
		
		document.addEventListener("click", ()=>{
			//attachedFile(문서첨부)
		});
		
		document.addEventListener("click", ()=>{
			//temporarySave(임시저장)
		});
		
		document.addEventListener("click", ()=>{
			//setEditorContent(결재)
		});
		
		document.addEventListener("click", ()=>{
			//openApprovalLineModal(결재선)
		});
	</script>
</html>