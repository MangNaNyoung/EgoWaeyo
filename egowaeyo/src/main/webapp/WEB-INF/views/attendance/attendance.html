<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<!-- th:block부분이 defalut.html 에서 지정한 layout:fragment="customContents" 영역에 들어간다.  -->

<section layout:fragment="content">
<style>
  .search-box {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      justify-content: flex-end;
      margin-bottom: 10px;
    }
    .search-box input {
      width: 150px;
    }
</style>
<div class="container mt-4">
  <h5 class="title">내 출퇴근 내역</h5>

  <div class="search-box">
    <button class="btn btn-success btn-sm">정정신청</button>
    <input type="text" class="form-control form-control-sm" placeholder="검색">
    <button class="btn btn-dark btn-sm">
      <i class="bi bi-search"></i>
    </button>
  </div>

  <div class="table-responsive">
   
        <div id="grid"></div>	
      
  </div>
</div>

	
<script th:inline="javascript">
var Grid = tui.Grid;
let data ={} ;
let gridData;
getData(data);
  const grid = new Grid({
	  el: document.getElementById('grid'),
	  columns: [
          // [Column-1] 출근일
          {
              header: '날짜',            // [필수] 컬럼 이름
              name: 'date',                 // [필수] 컬럼 매핑 이름 값
              sortable: true,                 // [선택] 컬럼의 정렬 여부
              resizable: true,                // [선택] 컬럼의 리사이즈 여부 옵션
              // [선택] 필터 옵션
              filter: {
                  type: 'text',
                  showApplyBtn: true,
                  showClearBtn: true
              }       
          },
          // [Column-2] 출근 상태
          {
              header: '출근',             // [필수] 컬럼 이름
              name: 'strIn',                 // [필수] 컬럼 매핑 이름 값
              sortable: true,                 // [선택] 컬럼의 정렬 여부
              resizable: true,                // [선택] 컬럼의 리사이즈 여부 옵션
              // [선택] 필터 옵션
              filter: {
                  type: 'text',
                  showApplyBtn: true,
                  showClearBtn: true
              },
          },
          // [Column-3] 퇴근 상태
          {
              header: '퇴근',            // [필수] 컬럼 이름
              name: 'strOut',               // [필수] 컬럼 매핑 이름 값
              sortable: true,                 // [선택] 컬럼의 정렬 여부
              resizable: true,                // [선택] 컬럼의 리사이즈 여부 옵션
              // [선택] 필터 옵션
              filter: {
                  type: 'text',
                  showApplyBtn: true,
                  showClearBtn: true
              },
          },


          // [Column-4] checkbox
          {
              header: '정정',            // [필수] 컬럼 이름
              name: 'pick',               // [필수] 컬럼 매핑 이름 값
              editor: {
                  type: 'checkbox',
                  useDefault: false
                },
              
          },
          
         
      ]
	});  
 
 
let url = /*[[@{/attendance}]]*/'';



	function getData(data){
		$.ajax({
			type : 'post',           // 타입 (get, post, put 등등)
			url :'/egowaeyo/attendList.do',           // 요청할 서버url
			headers : {              // Http header
				"Content-Type" : "application/json",
			},
			data : JSON.stringify(data),
			success : function(result) { // 결과 성공 콜백함수
					console.log(result);
				grid.resetData(result);
			},
			error : function(request, status, error) { // 결과 에러 콜백함수
					console.log(error)
			}
	})
	}

</script>
</section>


</html>