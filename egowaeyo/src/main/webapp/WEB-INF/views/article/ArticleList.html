<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<main layout:fragment="content">
	<style>
body {
	background: #fff;
	font-family: 'Noto Sans KR', sans-serif;
}

.custom-header {
	background: #fafafa;
	border-bottom: 2px solid #e5e5e5;
	padding: 18px 0 10px 0;
	margin-bottom: 0;
}

.custom-header .container {
	max-width: 100%;
}

.custom-title {
	font-size: 20px;
	font-weight: 700;
	margin-bottom: 0;
	letter-spacing: -1px;
}

.search-bar .form-select, .search-bar .form-control {
	min-width: 120px;
	height: 36px;
	font-size: 15px;
	background: #f5f5f5;
	border: 1px solid #ddd;
}

.search-bar .form-control {
	min-width: 180px;
	background: #fff;
}

.search-bar .btn {
	height: 36px;
	font-size: 15px;
	border-radius: 6px;
}

.search-bar .btn-primary {
	background: #222;
	border: none;
	margin-right: 100px;
}

.search-bar .btn-success {
	background: #222;
	width: 300px;
	border: none;
	margin-left: 8px;
}

.list-group-item {
	border: none;
	border-bottom: 1px solid #f2f2f2;
	padding: 32px 0 0 0;
	background: #fff;
}

.avatar {
	width: 36px;
	height: 36px;
	background: #e5e5e5;
	border-radius: 50%;
	flex-shrink: 0;
}

.item-title {
	font-size: 16px;
	font-weight: 500;
	margin-bottom: 4px;
	display: flex;
	align-items: center;
	gap: 8px;
}

.item-meta {
	font-size: 14px;
	color: #888;
	display: flex;
	align-items: center;
	gap: 16px;
}

#slide {
	position: fixed;
	top: 60px;
	left: 5rem;
	width: 250px;
	height: 100vh;
	background: #F8F9FA;
	border-right: 1px solid;
	z-index: 900;
}

@media ( max-width : 900px) {
	.search-bar .form-select, .search-bar .form-control {
		min-width: 80px;
		font-size: 13px;
	}
	.search-bar .form-control {
		min-width: 100px;
	}
	.custom-title {
		font-size: 16px;
	}
}

@media ( max-width : 600px) {
	.custom-header {
		padding: 10px 0 6px 0;
	}
	.avatar {
		width: 28px;
		height: 28px;
		margin-right: 8px;
	}
	.item-title {
		font-size: 14px;
	}
	.item-meta {
		font-size: 12px;
		gap: 8px;
	}
	.list-group-item {
		padding: 18px 0 0 0;
	}
}
</style>
	<!-- ì „ì²´ ë¬¸ì„œë¥¼ ê°ì‹¸ëŠ” div ì‹œì‘-->
	<div class="d-flex">
		<!-- slideë¥¼ ê°ì‹¸ëŠ” div ì‹œì‘-->
		<div id="slid" style="height: 1000px" class="col-2 border-end">
			<!-- slid ë‚´ìš© ì‹œì‘ -->
			<div id="board-panel" class="p-4 ps-0 mt-5">
				<h5>ê²Œì‹œíŒ</h5>

				<ul class="no_dot mt-4 fw-bold parentsProjects">
					<!--í”„ë¡œì íŠ¸ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤. -->
				</ul>
				<ul class="no_dot parentsProjects">
					<!-- JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë  í•­ëª© -->
				</ul>

				<ul class="no_dot">
					<li><span data-bs-toggle="modal"
						data-bs-target="#addProjectModal">+ ê²Œì‹œíŒì¶”ê°€</span></li>
				</ul>
			</div>
			<!-- slide ë‚´ìš© ë -->

		</div>
		<!-- slide ê°ì‹¸ëŠ” div ë -->

		<!-- ë‚´ìš©(ì›ë³¸) ê°ì‹¸ëŠ” div -->
		<div class="flex-grow-1 ">
			<!-- ë‚´ìš©(ì›ë³¸) ì‹œì‘  -->
			<div class="custom-header">
				<div class="container-fluid">
					<div class="d-flex align-items-center justify-content-between">
						<div class="custom-title">JPA í”„ë¡œì íŠ¸</div>

						<!-- í¼ ì‹œì‘ -->
						<form class="search-bar d-flex align-items-center gap-2">
							<select class="form-select">
								<option>ì „ì²´ ê²Œì‹œíŒ</option>
							</select> <select class="form-select">
								<option>ì œëª©</option>
								<option>ë‚´ìš©</option>
								<option>ì‘ì„±ì</option>
							</select> <input class="form-control" type="text" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
							<button
								class="btn btn-primary d-flex align-items-center justify-content-center"
								type="submit">
								<span class="visually-hidden">ê²€ìƒ‰</span>
								<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
									fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path
										d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zm-5.442 1.398a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11z" />
                     </svg>
							</button>
							<button class="btn btn-success" type="button">ê¸€ì“°ê¸°</button>
						</form>
					</div>
				</div>
			</div>

			<!-- ë¦¬ìŠ¤íŠ¸ -->
			<div class="container-fluid px-0">
				<div class="list-group">
					<!-- ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ë°˜ë³µ -->
					<div class="list-group-item d-flex align-items-center p-3">
						<div class="avatar "></div>

						<div class="flex-grow-1" th:each="boardVO : ${list}">
							<div class="item-title" th:text="${boardVO.nttSj}">
								<span th:text="${boardVO.nttSj}">ê²Œì‹œê¸€ ì œëª©</span> <span
									style="margin-right: -5px">ğŸ’¬</span> <span
									style="font-size: 14px; color: #4a90e2;"
									th:text="${boardVO.replyCount}">0</span>
							</div>

							<div class="item-meta">
								<span th:text="${boardVO.frstRegisterNm}">ì‘ì„±ì</span> <span
									th:text="${boardVO.frstRegisterPnttm}">ì‘ì„±ì¼</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- ë‚´ìš©(ì›ë³¸) ë -->

		</div>
		<!-- ì›ë³¸(ë‚´ìš©) ë‚´ìš© ë -->

	</div>
	<!-- ì „ì²´ ë¬¸ì„œë¥¼ ê°ì‹¸ëŠ” íƒœê·¸ ë-->

	<!-- ëª¨ë‹¬ì€ ë°”ê¹¥ìœ¼ë¡œ ë¹¼ì„œ ë„£ì–´ì£¼ì„¸ìš” -->
	<div th:replace="article/addProjectModal :: addProjectModal"></div>
	<div th:replace="article/editProjectModal :: editProjectModal"></div>
	<!-- ìŠ¤í¬ë¦½íŠ¸ë„ ë³µì‚¬í•´ì„œ ê°€ì ¸ê°€ë©´ ë©ë‹ˆë‹¤ -->
	<script>
   function openModal() {
    fetch('addProjectModal.html')
      .then(response => response.text())
      .then(html => {
        const modalContainer = document.getElementById('modal-container');
        modalContainer.innerHTML = html;
        modalContainer.classList.remove('hidden');
      })
      .catch(error => console.error('Error loading modal:', error));
  }

  function closeModal() {
    const modalContainer = document.getElementById('modal-container');
    modalContainer.classList.add('hidden');
    modalContainer.innerHTML = ''; // ëª¨ë‹¬ ë‚´ìš© ì´ˆê¸°í™”
  }
  
  
  // í”„ë¡œì íŠ¸ ìˆ˜ì • ëª¨ë‹¬
  function openModal() {
    fetch('editProjectModal.html')
      .then(response => response.text())
      .then(html => {
        const modalContainer = document.getElementById('modal-container');
        modalContainer.innerHTML = html;
        modalContainer.classList.remove('hidden');
      })
      .catch(error => console.error('Error loading modal:', error));
  }

  function closeModal() {
    const modalContainer = document.getElementById('modal-container');
    modalContainer.classList.add('hidden');
    modalContainer.innerHTML = ''; // ëª¨ë‹¬ ë‚´ìš© ì´ˆê¸°í™”
  }  
  
  
  // ì‚¬ì´ë“œë°”
      
		
			document.addEventListener("DOMContentLoaded", function () {
				fetch('/egowaeyo/bbsMaster/groupedBbsData')
					.then(response => response.json())
					.then(data => {
						console.log("Fetched Data:", data); // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€

						const parentProjectsList = document.querySelector("ul.parentsProjects");
						parentProjectsList.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

						Object.entries(data).forEach(([codeNm, bbsList]) => {
							const groupItem = document.createElement("li");
							groupItem.textContent = codeNm;

							// ìƒˆë¡œìš´ ul íƒœê·¸ ìƒì„±
							const subList = document.createElement("ul");
							subList.style.fontWeight = "bold"; // ul íƒœê·¸ì— bold ìŠ¤íƒ€ì¼ ì ìš©

							bbsList.forEach(bbsNm => {
								// li íƒœê·¸ ìƒì„±
								const listItem = document.createElement("li");

								// img íƒœê·¸ ìƒì„±
								const img = document.createElement("img");
								img.setAttribute("data-bs-toggle", "modal");
								img.setAttribute("data-bs-target", "#editProjectModal");
								img.setAttribute("class", "img-icon");
								img.setAttribute("src", "/egowaeyo/assets/images/icon/manage.png");
								img.setAttribute("style", "cursor: pointer;");

								// bbsNm í…ìŠ¤íŠ¸ ì¶”ê°€
								const textNode = document.createTextNode(bbsNm);

								// liì— í…ìŠ¤íŠ¸ì™€ img ì¶”ê°€
								listItem.appendChild(textNode);
								listItem.appendChild(img);

								listItem.style.fontWeight = "normal"; // li íƒœê·¸ì— normal ìŠ¤íƒ€ì¼ ì ìš©
								subList.appendChild(listItem);
							});

							groupItem.appendChild(subList);
							parentProjectsList.appendChild(groupItem);
						});
					})
					.catch(error => console.error('Error fetching grouped BBS data:', error));
			});



		
</script>
</main>

</html>